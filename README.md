# Raspberry Pi Sensor Logger

![Raspberry Pi](https://img.shields.io/badge/Raspberry%20Pi-A22846?logo=raspberrypi&logoColor=white)
![C](https://img.shields.io/badge/C-00599C?logo=c&logoColor=white)
![SQLite](https://img.shields.io/badge/SQLite-07405E?logo=sqlite&logoColor=white)

> **ì›ë˜ ëª©í‘œ:** C ì–¸ì–´ë¡œ SQLite ì‚¬ìš©ë²• ë°°ìš°ê¸°  
> **ì‹¤ì œ ê²°ê³¼:** ì´ˆìŒíŒŒ + IR ì„¼ì„œ + I2C LCD í†µí•© ì‹œìŠ¤í…œ

---

## í”„ë¡œì íŠ¸ íƒ„ìƒ ìŠ¤í† ë¦¬

### ì›ë˜ ê³„íš
```c
// ëª©í‘œ: SQLiteì— ë°ì´í„° ë„£ê³  ë¹¼ëŠ” ê²ƒë§Œ ê³µë¶€í•˜ì!
sqlite3_open("test.db", &db);
sqlite3_exec(db, "INSERT INTO ...", ...);
sqlite3_close(db);

// ë!
```

### ì‹¤ì œë¡œ ì¼ì–´ë‚œ ì¼
```
1. DB í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°ê°€ í•„ìš”í•˜ë„¤? 
   â†’ ì´ˆìŒíŒŒ ì„¼ì„œ ì—°ê²°

2. ì´ˆìŒíŒŒë§Œìœ¼ë¡œëŠ” ì‹¬ì‹¬í•˜ë„¤?
   â†’ IR ì„¼ì„œ ì¶”ê°€ (ë¬¼ì²´ ê°ì§€)

3. í„°ë¯¸ë„ë§Œ ë³´ê¸° ì§€ë£¨í•œë°?
   â†’ I2C LCD 16x2 ì¶”ê°€

4. LCDê°€ ì•ˆ ë˜ë„¤???
   â†’ I2C ì£¼ì†Œ ì°¾ê¸°, íƒ€ì´ë° ì¡°ì •, ì‹œí–‰ì°©ì˜¤ 3ì‹œê°„...

5. ê²°ê³¼: SQLiteëŠ” ë’·ì „, ì„¼ì„œ í”„ë¡œì íŠ¸ ì™„ì„±
```

---

## ğŸ¯ ìµœì¢… ê²°ê³¼ë¬¼

### ì›ë˜ ëª©í‘œ vs ì‹¤ì œ
| í•­ëª© | ê³„íš | ì‹¤ì œ |
|-----|------|------|
| **ì£¼ì œ** | SQLite ê³µë¶€ | ì„¼ì„œ í†µí•© ì‹œìŠ¤í…œ |
| **ì„¼ì„œ** | ì—†ìŒ | ì´ˆìŒíŒŒ + IR + LCD |
| **ê°œë°œ ì‹œê°„** | 2ì‹œê°„ ì˜ˆìƒ | 2ì¼ ì†Œìš” |
| **ì–´ë ¤ì› ë˜ ê²ƒ** | DB ì¿¼ë¦¬ | I2C LCD  |
| **SQLite ë¹„ì¤‘** | 100% | 20% |

---

##  ì£¼ìš” ê¸°ëŠ¥

### 1. ë¬¼ì²´ ê°ì§€ ì‹œìŠ¤í…œ
- **IR ì„¼ì„œ**: ë¬¼ì²´ê°€ ê°€ê¹Œì´ ì˜¤ë©´ ìë™ ê°ì§€
- **ì´ˆìŒíŒŒ ì„¼ì„œ**: ì •í™•í•œ ê±°ë¦¬ ì¸¡ì • (2~400cm)
- **LED ê²½ê³ **: 20cm ì´ë‚´ ì ‘ê·¼ ì‹œ ì ë“±

### 2. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- **I2C LCD 16x2**: ê±°ë¦¬ ì‹¤ì‹œê°„ í‘œì‹œ
- **í„°ë¯¸ë„ ì¶œë ¥**: ì¸¡ì • ë°ì´í„° ë¡œê¹…

### 3. ë°ì´í„° ì €ì¥ (ì›ë˜ ëª©ì !)
- **SQLite**: ëª¨ë“  ì¸¡ì •ê°’ ìë™ ì €ì¥
- **íƒ€ì„ìŠ¤íƒ¬í”„**: ì¸¡ì • ì‹œê°„ ê¸°ë¡

---

## ğŸ”§ í•˜ë“œì›¨ì–´ êµ¬ì„±

### í•„ìˆ˜ ë¶€í’ˆ
| ë¶€í’ˆ | ìˆ˜ëŸ‰ | ìš©ë„ | ë¹„ê³  |
|-----|------|------|------|
| Raspberry Pi | 1 | ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ | Pi 4 ê¶Œì¥ |
| HC-SR04 | 1 | ì´ˆìŒíŒŒ ê±°ë¦¬ ì¸¡ì • | 2~400cm |
| IR ì„¼ì„œ | 1 | ë¬¼ì²´ ê°ì§€ | ì¥ì• ë¬¼ ì„¼ì„œ |
| I2C LCD 16x2 | 1 | ê±°ë¦¬ í‘œì‹œ | **ì´ê²Œ ì œì¼ í˜ë“¤ì—ˆìŒ** |
| LED | 1 | ê²½ê³  í‘œì‹œ | 5mm ì•„ë¬´ê±°ë‚˜ |
| 220Î© ì €í•­ | 1 | LED ì „ë¥˜ ì œí•œ | |
| ì í¼ ì™€ì´ì–´ | ì ë‹¹ëŸ‰ | ì—°ê²°ìš© | |

---

## ğŸ”Œ GPIO ì—°ê²°

### í•€ ë°°ì¹˜ (Raspberry Pi 4)
```
ì´ˆìŒíŒŒ ì„¼ì„œ (HC-SR04):
  VCC  â†’ 5V (Pin 2)
  TRIG â†’ GPIO 27 (Pin 13)
  ECHO â†’ GPIO 17 (Pin 11)
  GND  â†’ GND

IR ì„¼ì„œ:
  VCC  â†’ 3.3V (Pin 1)
  OUT  â†’ GPIO 22 (Pin 15)
  GND  â†’ GND

I2C LCD 16x2:
  VCC  â†’ 5V
  GND  â†’ GND
  SDA  â†’ GPIO 2 (Pin 3)
  SCL  â†’ GPIO 3 (Pin 5)

LED:
  GPIO 23 (Pin 16) â†’ [220Î©] â†’ LED(+) â†’ LED(-) â†’ GND
```

---

##  ê°€ì¥ í° ë„ì „: I2C LCD (3ì‹œê°„ ê³ ìƒ...)

### ë¬¸ì œ 1: LCD ì•ˆ ì¼œì§
```bash
# I2C ì¥ì¹˜ ì¸ì‹ í™•ì¸
sudo i2cdetect -y 1

# ê²°ê³¼: ì•„ë¬´ê²ƒë„ ì•ˆ ë‚˜ì˜´???
```

**í•´ê²°:**
```bash
# I2C í™œì„±í™” (ì„¤ì • ì•ˆ í–ˆì—ˆìŒ )
sudo raspi-config
# Interface Options â†’ I2C â†’ Enable

# ì¬ë¶€íŒ…
sudo reboot

# ë‹¤ì‹œ í™•ì¸
sudo i2cdetect -y 1
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- 27 -- -- -- -- -- -- -- --  â† ì—¬ê¸° ìˆì—ˆë„¤!
```

---

### ë¬¸ì œ 2: I2C ì£¼ì†Œê°€ 0x27? 0x3F?
```c
// ì‹œë„ 1: 0x27ë¡œ ì„¤ì • (ì•ˆ ë¨)
#define I2C_ADDR 0x27

// ì‹œë„ 2: 0x3Fë¡œ ë³€ê²½ (ë¨!)
#define I2C_ADDR 0x3F

// êµí›ˆ: i2cdetectë¡œ í™•ì¸ í•„ìˆ˜!
```

---

### ë¬¸ì œ 3: ê¸€ìê°€ ì•ˆ ë‚˜ì˜´
```c
// ì‹œë„ 1: ë°”ë¡œ ì¶œë ¥ (ì‹¤íŒ¨)
lcd_init();
lcd_string("Hello");  // ì•„ë¬´ê²ƒë„ ì•ˆ ë‚˜ì˜´

// ì‹œë„ 2: usleep ì¶”ê°€ (ì„±ê³µ!)
lcd_init();
usleep(5000);  // 5ms ëŒ€ê¸° ì¶”ê°€
lcd_string("Hello");  // ë‚˜ì™”ë‹¤!
```

**êµí›ˆ:**
> "I2CëŠ” ëŠë¦¬ë‹¤. í•­ìƒ ë”œë ˆì´ë¥¼ ì£¼ì!"

---

### ë¬¸ì œ 4: Enable í„ìŠ¤ íƒ€ì´ë°
```c
// ë‚˜ìœ ì½”ë“œ (LCDê°€ ì‹ í˜¸ ëª» ì½ìŒ)
void lcd_toggle_enable(int bits) {
    i2c_write_byte(bits | ENABLE);
    i2c_write_byte(bits & ~ENABLE);
}

// ì¢‹ì€ ì½”ë“œ (ë”œë ˆì´ ì¶”ê°€)
void lcd_toggle_enable(int bits) {
    usleep(500);
    i2c_write_byte(bits | ENABLE);
    usleep(500);
    i2c_write_byte(bits & ~ENABLE);
    usleep(500);
}
```

**ê²°ê³¼:** 3ì‹œê°„ ë§Œì— ë“œë””ì–´ ì‘ë™!

---

##  ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. I2C í™œì„±í™” (í•„ìˆ˜!)
```bash
sudo raspi-config
# Interface Options â†’ I2C â†’ Enable
sudo reboot
```

### 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
sudo apt update
sudo apt install -y gcc make libgpiod-dev sqlite3 libsqlite3-dev i2c-tools
```

### 3. I2C ì£¼ì†Œ í™•ì¸
```bash
sudo i2cdetect -y 1
# LCD ì£¼ì†Œ í™•ì¸ (ë³´í†µ 0x27 ë˜ëŠ” 0x3F)
```

### 4. ì½”ë“œ ìˆ˜ì • (í•„ìš”ì‹œ)
```c
// ir_ultrasonic_sensor_lcd.c íŒŒì¼ì—ì„œ
#define I2C_ADDR 0x27  // â† ë³¸ì¸ì˜ LCD ì£¼ì†Œë¡œ ë³€ê²½!
```

### 5. ì»´íŒŒì¼ ë° ì‹¤í–‰
```bash
git clone https://github.com/epqlffltm/rpi_sensor_logger.git
cd rpi_sensor_logger

# LCD í¬í•¨ ë²„ì „
gcc -o sensor_lcd ir_ultrasonic_sensor_lcd.c -lgpiod -lsqlite3
sudo ./sensor_lcd

# LCD ì—†ëŠ” ë²„ì „ (í„°ë¯¸ë„ë§Œ)
gcc -o sensor ir_ultrasonic_sensor.c -lgpiod -lsqlite3
sudo ./sensor
```

---

## ğŸ® ì‚¬ìš© ë°©ë²•

### í”„ë¡œê·¸ë¨ ì‹¤í–‰
```bash
# LCD ë²„ì „ (ì¶”ì²œ)
sudo ./sensor_lcd

# ì¶œë ¥ ì˜ˆì‹œ:
# LCD í™”ë©´:
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Dist: 15.34 cm â”‚  â† 1ì¤„
# â”‚ IR: Detected   â”‚  â† 2ì¤„
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# í„°ë¯¸ë„:
# [1] ê±°ë¦¬: 15.34 cm (IR ê°ì§€ë¨)
# [2] ê±°ë¦¬: 20.15 cm
```

### ë°ì´í„° í™•ì¸
```bash
# SQLite DB ì§ì ‘ ë³´ê¸°
sqlite3 ultrasonic.db

# SQL ëª…ë ¹ì–´
sqlite> SELECT * FROM ultrasonic ORDER BY id DESC LIMIT 10;
sqlite> .quit
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### í…Œì´ë¸”: ultrasonic
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|-----|------|------|
| id | INTEGER | ê³ ìœ  ID (ìë™ ì¦ê°€) |
| measurement_num | INT | ì¸¡ì • ë²ˆí˜¸ |
| distance | REAL | ê±°ë¦¬ (cm) |
| ir_triggered | BOOL | IR ê°ì§€ ì—¬ë¶€ (1/0) |
| timestamp | DATETIME | ì¸¡ì • ì‹œê°„ (ìë™) |

### ì˜ˆì‹œ ë°ì´í„°
```sql
sqlite> SELECT * FROM ultrasonic LIMIT 5;

id | measurement_num | distance | ir_triggered | timestamp
---|-----------------|----------|--------------|-------------------
1  | 1               | 25.43    | 0            | 2026-02-07 10:30:15
2  | 2               | 18.92    | 1            | 2026-02-07 10:30:16
3  | 3               | 12.05    | 1            | 2026-02-07 10:30:17
```

---

## ë¬¸ì œ í•´ê²° (ì‹¤ì œ ê²ªì€ ê²ƒë“¤)

### I2C LCD ê´€ë ¨

**Q. LCDê°€ ì•„ì˜ˆ ì•ˆ ì¼œì ¸ìš”**
```bash
# I2C í™œì„±í™” í™•ì¸
sudo raspi-config

# I2C ì¥ì¹˜ ì¸ì‹ í™•ì¸
sudo i2cdetect -y 1
# ìˆ«ìê°€ ì•ˆ ë³´ì´ë©´ â†’ ë°°ì„  í™•ì¸!
```

**Q. ê¸€ìê°€ ê¹¨ì ¸ìš”**
```c
// ì´ˆê¸°í™” í›„ ì¶©ë¶„í•œ ëŒ€ê¸°
lcd_init();
usleep(5000);  // â† ì´ê±° í•„ìˆ˜!
lcd_string("Hello");
```

**Q. LCD ì£¼ì†Œê°€ ë­”ì§€ ëª¨ë¥´ê² ì–´ìš”**
```bash
sudo i2cdetect -y 1
# ë‚˜ì˜¤ëŠ” ìˆ«ì(27 ë˜ëŠ” 3F)ë¥¼ ì½”ë“œì— ì ìš©
```

---

### ì„¼ì„œ ê´€ë ¨

**Q. ì´ˆìŒíŒŒ ì„¼ì„œê°€ ì´ìƒí•œ ê°’ì„ ì¶œë ¥í•´ìš”**
```c
// ìœ íš¨ ë²”ìœ„ ì²´í¬ ì¶”ê°€
if(distance >= 2.0 && distance <= 400.0) {
    printf("ì •ìƒ: %.2f cm\n", distance);
} else {
    printf("ë²”ìœ„ ì´ˆê³¼\n");
}
```

**Q. IR ì„¼ì„œê°€ ê³„ì† ê°ì§€ë˜ì–´ìš”**
- ì„¼ì„œ ë’¤ìª½ì˜ ê°€ë³€ì €í•­ ëŒë ¤ì„œ ê°ë„ ì¡°ì ˆ
- ì‹œê³„ë°©í–¥: ê°ë„ ë‚®ì¶¤
- ë°˜ì‹œê³„ë°©í–¥: ê°ë„ ë†’ì„

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
rpi_sensor_logger/
â”œâ”€â”€ lab/                          # í…ŒìŠ¤íŠ¸ ì½”ë“œ ëª¨ìŒ
â”‚   â”œâ”€â”€ ultrasonic_test.c        # ì´ˆìŒíŒŒ ì„¼ì„œ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ lcd_test.c               # â˜… I2C LCD í…ŒìŠ¤íŠ¸ (ì œì¼ ì˜¤ë˜ ê±¸ë¦¼)
â”‚   â”œâ”€â”€ db_test.c                # SQLite í…ŒìŠ¤íŠ¸ (ì›ë˜ ëª©ì !)
â”‚   â”œâ”€â”€ led_test.c               # LED í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ button_test.c            # ë²„íŠ¼ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ dht11_test.c             # ì˜¨ìŠµë„ ì„¼ì„œ (ì•ˆ ì“°ì„)
â”‚   â”œâ”€â”€ mpu6050_test.c           # ìì´ë¡œ ì„¼ì„œ (ì•ˆ ì“°ì„)
â”‚   â”œâ”€â”€ line_trace_test.c        # ë¼ì¸ íŠ¸ë ˆì´ì„œ (ì•ˆ ì“°ì„)
â”‚   â””â”€â”€ NOTICE.txt               # í…ŒìŠ¤íŠ¸ ì½”ë“œ ì„¤ëª…
â”‚
â”œâ”€â”€ ir_ultrasonic_sensor.c        # ë©”ì¸ (LCD ì—†ìŒ)
â”œâ”€â”€ ir_ultrasonic_sensor_lcd.c    # ë©”ì¸ (LCD í¬í•¨) â˜…
â”œâ”€â”€ ultrasonic_db.c               # DB ë¡œê±° ì „ìš©
â”œâ”€â”€ Makefile                      # ë¹Œë“œ íŒŒì¼
â”œâ”€â”€ README.md                     # ì´ íŒŒì¼
â””â”€â”€ ultrasonic.db                 # SQLite DB (ì‹¤í–‰ í›„ ìƒì„±)
```

---

## ğŸ“ ë°°ìš´ ê²ƒë“¤

### 1. SQLiteëŠ” ìƒê°ë³´ë‹¤ ì‰¬ì›€ (ì›ë˜ ëª©ì )
```c
// 3ì¤„ì´ë©´ ë
sqlite3_open("test.db", &db);
sqlite3_exec(db, "INSERT INTO ...", NULL, NULL, &err);
sqlite3_close(db);
```

â†’ **ê·¼ë° ì„¼ì„œ ì—°ê²°í•˜ëŠ” ê²Œ ë” ì¬ë°Œì–´ì„œ ë¹ ì ¸ë²„ë¦¼** 

---

### 2. I2C LCDëŠ” ì§„ì§œ ê¹Œë‹¤ë¡œì›€
```
ì˜ˆìƒ: 10ë¶„ì´ë©´ ëë‚˜ê² ì§€?
ì‹¤ì œ: 3ì‹œê°„ ê³ ìƒ...

ë°°ìš´ ê²ƒ:
- I2C í™œì„±í™” í•„ìˆ˜
- ì£¼ì†Œ í™•ì¸ í•„ìˆ˜ (i2cdetect)
- ë”œë ˆì´ í•„ìˆ˜ (usleep ì—†ìœ¼ë©´ ì•ˆ ë¨)
- Enable í„ìŠ¤ íƒ€ì´ë° ì¤‘ìš”
```

---

### 3. C ì–¸ì–´ì˜ ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°
```c
// GPIO ì œì–´
gpiod_line_request_output(line, "name", value);

// I2C ì œì–´
ioctl(file, I2C_SLAVE, addr);

// SQLite ì œì–´
sqlite3_exec(db, sql, ...);
```

---

### 4. í•˜ë“œì›¨ì–´ ë””ë²„ê¹…ì˜ ì¤‘ìš”ì„±
```
ì†Œí”„íŠ¸ì›¨ì–´ ë²„ê·¸: ë””ë²„ê±°ë¡œ ì°¾ê¸°
í•˜ë“œì›¨ì–´ ë²„ê·¸:
1. ë°°ì„  ë‹¤ì‹œ í™•ì¸
2. i2cdetectë¡œ ì¥ì¹˜ í™•ì¸
3. LED ì¼œë³´ë©´ì„œ ì‹ í˜¸ í™•ì¸
4. ì˜¤ì‹¤ë¡œìŠ¤ì½”í”„ (ì—†ìœ¼ë©´ LEDë¡œ ëŒ€ì²´)
```

---

## ğŸ“ˆ ê°œë°œ íƒ€ì„ë¼ì¸

### Day 1 (2ì‹œê°„ â†’ 6ì‹œê°„)
```
ê³„íš: SQLite ê³µë¶€
ì‹¤ì œ:
  10:00 - DB í…ŒìŠ¤íŠ¸ (30ë¶„)
  10:30 - ì´ˆìŒíŒŒ ì„¼ì„œ ì¶”ê°€ (1ì‹œê°„)
  12:00 - IR ì„¼ì„œ ì¶”ê°€ (30ë¶„)
  13:00 - ì ì‹¬
  14:00 - I2C LCD ì—°ê²° ì‹œë„ (3ì‹œê°„ ê³ ìƒ ğŸ˜±)
  17:00 - í¬ê¸°í•˜ê³  í‡´ê·¼
```

### Day 2 (4ì‹œê°„)
```
  10:00 - I2C LCD ì¬ë„ì „
  10:30 - raspi-config ì„¤ì • ë°œê²¬!
  11:00 - LCD ì‘ë™ ì„±ê³µ! ğŸ‰
  12:00 - ì „ì²´ í†µí•©
  13:00 - í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…
  14:00 - ì™„ì„±!
```


---

## ğŸ’¬ í›„ê¸°

### ì›ë˜ ëª©í‘œ
> "C ì–¸ì–´ë¡œ SQLite ì“°ëŠ” ë²•ë§Œ ë°°ìš°ì"

### ì‹¤ì œ ê²°ê³¼
> "ì´ˆìŒíŒŒ + IR + LCD í†µí•© ì‹œìŠ¤í…œ ì™„ì„±  
> SQLiteëŠ” 20%ë§Œ ì“°ì„  
> I2C LCDì— 3ì‹œê°„ íˆ¬ì  
> ê·¸ë˜ë„ ì¬ë°Œì—ˆìŒ"

**êµí›ˆ:**
> "í”„ë¡œì íŠ¸ëŠ” í•­ìƒ ê³„íšëŒ€ë¡œ ì•ˆ ê°„ë‹¤.  

---

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License - ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì„¸ìš”!

---

## ğŸ‘¨â€ğŸ’» ê°œë°œì

**ê¹€ì§„í˜•**

- GitHub: [@epqlffltm](https://github.com/epqlffltm)
- Email: [Your Email]

---

## ğŸ™ ì°¸ê³  ìë£Œ

- [Raspberry Pi GPIO](https://www.raspberrypi.com/documentation/computers/gpio.html)
- [HC-SR04 Datasheet](https://cdn.sparkfun.com/datasheets/Sensors/Proximity/HCSR04.pdf)
- [HD44780 LCD Controller](https://www.sparkfun.com/datasheets/LCD/HD44780.pdf)
- [SQLite C API](https://www.sqlite.org/c3ref/intro.html)

---

